<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Icon (font awesome) -->
    <script src="https://kit.fontawesome.com/989420847f.js" crossorigin="anonymous"></script>

    <!-- CSS -->
    <link href="../style/uploaded_mainpage.css" rel="stylesheet">

    <!-- js -->
    <script defer src="../script/main.js"></script>
    <script defer src="../script/signapi.js"></script>
    <script defer src="../script/Upload_modal.js"></script>

    <script>
        async function checkLogin() {
            const info = await getUserInfo();
            console.log(info)
            const username = document.getElementById("username")
            const name = document.getElementById("user-name")
            const userpoint = document.getElementById("userpoint")
            const point = document.getElementById("user-point")
            const loginoutButton = document.getElementById("loginout")
            if (info){
                username.innerText = info[0]
                userpoint.innerText = info[1]
                loginoutButton.innerText = "ë¡œê·¸ì•„ì›ƒ"
                loginoutButton.setAttribute("onclick", "logout()")
            }else{
                name.innerText = ""
                point.innerText = ""
                loginoutButton.innerText = "ë¡œê·¸ì¸"
                loginoutButton.setAttribute("onclick", "location.href='/login.html'")
            }
        }
        checkLogin();
    </script>
    <title>10cycle</title>
</head>
<body>
<!-- í—¤ë” (ë¡œê³  ë° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼) -->
<header class="header">
    <!-- ë¡œê³  -->
    <div class="logo">
        <h2>ğŸŒ¿10CYCLE</h2>
    </div>

    <!-- íšŒì› ì •ë³´ (ë¡œê·¸ì•„ì›ƒ, í¬ì¸íŠ¸) -->
    <div class="user-info">
        <p class="logout" id="loginout" onclick="logout()">
            <i class="fa-solid fa-right-from-bracket" id="logout-icon"></i> ë¡œê·¸ì•„ì›ƒ
        </p>
        <p class="point" id="user-point">
            <i class="fa-solid fa-coins"></i>  <span id="userpoint"></span> í¬ì¸íŠ¸
        </p>
        <p class="username" id="user-name">
            <i class="fa-solid fa-user"></i> <span id="username"></span>ë‹˜
        </p>
    </div>
</header>

<!-- í—¤ë” ì´ì™¸ì˜ ë¶€ë¶„ -->
<div class="main-body">
    <!-- ì‚¬ì§„ ê°€ì ¸ì˜¤ëŠ” ë²„íŠ¼ ë¶€ë¶„ -->
    <div class="load-image-div">
        <div class="uploaded">
            <img class="uploaded-img" src="/static/image/metal75.jpg">
            <div class="result">
                ìº”ë¥˜ ì…ë‹ˆë‹¤
                <br><br>
                <ul class="manual">
                    <li>
                        ìš°ì„ , ìº”ì„ ì”»ì–´ì£¼ì„¸ìš”
                    </li>
                    <li>
                        ê·¸ í›„, ìº”ì„ ë²„ë ¤ì£¼ì„¸ìš”
                    </li>
                </ul>
                <button class="load-image" data-toggle="modal" data-target="#upload_image_modal" onclick="handleSignup()">
                    <i class="fa-solid fa-arrow-up-from-bracket"></i> ë‹¤ë¥¸ ì‚¬ì§„
                </button>
            </div>

        </div>
    </div>

    <!-- ì“°ë ˆê¸°í†µ 4ê°œ ë²„íŠ¼ ë¶€ë¶„ -->
    <div class="bins">
        <!-- Paper ì“°ë ˆê¸°í†µ ë²„íŠ¼ -->
        <button class="paper" data-toggle="modal" data-target="#paperbinmodal" onclick="getuserpaper">
            <img class="paper-bin" src="/static/image/Bin_Paper.png"
                 alt="Paper">
        </button>
        <!-- Metal ì“°ë ˆê¸°í†µ ë²„íŠ¼ -->
        <button class="metal" data-toggle="modal" data-target="#metalbinmodal" onclick="getusermetal">
            <img class="metal-bin" src="/static/image/Bin_Metal.png"
                 alt="Paper">
        </button>
        <!-- Plastic ì“°ë ˆê¸°í†µ ë²„íŠ¼ -->
        <button class="plastic" data-toggle="modal" data-target="#plasticbinmodal" onclick="getuserplastic">
            <img class="plastic-bin" src="/static/image/Bin_Plastic.png"
                 alt="Paper">
        </button>
        <!-- Glass ì“°ë ˆê¸°í†µ ë²„íŠ¼ -->
        <button class="glass" data-toggle="modal" data-target="#glassbinmodal" onclick="getuserglass">
            <img class="glass-bin" src="/static/image/Bin_Glass.png"
                 alt="Paper">
        </button>

    </div>
    <!-- í‘¸í„° -->
    <footer class="footer">
        <p>
            <a href="https://github.com/NotEasyTeam" target="_blank">ì†Œê°œ</a> Â·
            <a href="">ë„ì›€ë§</a> Â·
            <a href="">í™ë³´ ì„¼í„°</a> Â·
            <a href="">API</a> Â·
            <a href="">ì±„ìš© ì •ë³´</a>
            <a href="">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> Â·
            <a href="">ì•½ê´€</a> Â·
            <a href="">ìœ„ì¹˜</a> Â·
            <a href="">ì¸ê¸° ê³„ì •</a> Â·
            <a href="">í•´ì‹œíƒœê·¸</a> Â·
            <a href="">ì–¸ì–´</a>
        </p>
        <p>Â© 2022 10Cycle FROM NOT EASY TEAM</p>
    </footer>
    <!-- Bin Modals -->
    <!-- Paper Bin Modal -->
    <div class="modal fade" id="paperbinmodal" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Paper Items</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="grid" id="papergrid">
                    
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Metal Bin Modal -->
    <div class="modal fade" id="metalbinmodal" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Paper Items</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="grid" id="metalgrid">
                        
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Plastic Bin Modal -->
    <div class="modal fade" id="plasticbinmodal" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Paper Items</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="grid" id="plasticgrid">
                       
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Glass Bin Modal -->
    <div class="modal fade" id="glassbinmodal" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Paper Items</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="grid" id="glassgrid">
                       
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--ì—…ë¡œë“œ ëª¨ë‹¬-->
    <div class="modal fade" id="upload_image_modal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
         <div id="root">
    <div  class="modal_overlay" style="background: gray">
        <div class="modal_window">
        <h2 class="title">ë¶„ë¦¬ìˆ˜ê±°ë¥¼ í•´ë³¼ê¹Œ?</h2>
        <hr>
        <div class="contents">
            <div class="upload-box">
                <div id="drop-file" class="drag-file">
                    <img src="https://img.icons8.com/pastel-glyph/2x/image-file.png" alt="íŒŒì¼ ì•„ì´ì½˜" class="image">
                    <p class="message">Drag files to upload</p>
                    <img src="" alt="ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€" class="preview">
                </div>
                <label class="file-label" for="chooseFile">ì¬í™œìš© í•˜ê¸°</label>
                <input class="file" id="chooseFile" type="file" onchange="dropFile.handleFiles(this.files)"
                       accept="image/png, image/jpeg, image/gif">
            </div>
        </div>
    </div>
    </div>
</div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</div>


<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="script/Upload_modal.js"></script>

</body>
</html>